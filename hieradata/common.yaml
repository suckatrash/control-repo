---
message: "This node is using common data"

#Puppet Server Tuning
#puppet_enterprise::master::puppetserver::jruby_max_requests_per_instance: 1

#puppet_enterprise::master::environment_timeout: '0'

### This works for just puppetdb / port 8081
#puppet_enterprise::puppetdb::jetty_ini::ssl_protocols:
#  - "TLSv1.2"

puppet_enterprise::master::puppetserver::cipher_suites:
  - "ECDHE-RSA-AES128-GCM-SHA256"
  - "ECDHE-ECDSA-AES128-GCM-SHA256"
  - "ECDHE-RSA-AES256-GCM-SHA384"
  - "ECDHE-ECDSA-AES256-GCM-SHA384"
  - "DHE-RSA-AES128-GCM-SHA256"
  - "DHE-DSS-AES128-GCM-SHA256"
  - "kEDH+AESGCM:ECDHE-RSA-AES128-SHA256"
  - "ECDHE-ECDSA-AES128-SHA256"
  - "ECDHE-RSA-AES128-SHA"
  - "ECDHE-ECDSA-AES128-SHA"
  - "ECDHE-RSA-AES256-SHA384"
  - "ECDHE-ECDSA-AES256-SHA384"
  - "ECDHE-RSA-AES256-SHA"
  - "ECDHE-ECDSA-AES256-SHA"
  - "DHE-RSA-AES128-SHA256"
  - "DHE-RSA-AES128-SHA"
  - "DHE-DSS-AES128-SHA256"
  - "DHE-RSA-AES256-SHA256"
  - "DHE-DSS-AES256-SHA"
  - "DHE-RSA-AES256-SHA"
  - "ECDHE-RSA-DES-CBC3-SHA"
  - "ECDHE-ECDSA-DES-CBC3-SHA"
  - "AES128-GCM-SHA256"
  - "AES256-GCM-SHA384"
  - "AES128-SHA256"
  - "AES256-SHA256"
  - "AES128-SHA"
  - "AES256-SHA"
  - "AES"
  - "CAMELLIA"
  - "DES-CBC3-SHA"
  - "!aNULL"
  - "!eNULL"
  - "!EXPORT"
  - "!DES"
  - "!RC4"
  - "!MD5"
  - "!PSK"
  - "!aECDH"
  - "!EDH-DSS-DES-CBC3-SHA"
  - "!EDH-RSA-DES-CBC3-SHA"
  - "!KRB5-DES-CBC3-SHA"

### This doesn't work https://tickets.puppetlabs.com/browse/CODEMGMT-1110
#puppet_enterprise::master::code_manager::forge_settings:
#  baseurl: 'https://forgeapi.puppet.com'
#  forge_authorization: 'pe-license UHVwcGV0IExhYnM='

### setup for external hieradata follows:
puppet_enterprise::master::code_manager::sources:
  code: 
    remote: "git@github.com:suckatrash/control-repo.git"
#  other2:
#    remote: "https://github.com/suckatrash/control-repo.git"
#    prefix: 'https'
 
## Terrible non-working shellgit hack 
#puppet_enterprise::master::code_manager::git_settings:
#  provider: shellgit
#  private_key: '/etc/puppetlabs/puppetserver/ssh/id-control_repo.rsa'
  
#puppet_enterprise::master::code_manager::forge_settings:
#  baseurl: 'https://forge.puppetlabs.com'
#  proxy: 'http://proxy.example.com:3228'

##Code manager tuning
#puppet_enterprise::master::code_manager::deploy_pool_size: 8
#puppet_enterprise::master::code_manager::timeouts_deploy: 30
#puppet_enterprise::master::code_manager::timeouts_fetch: 300
#puppet_enterprise::master::code_manager::timeouts_hook: 30
#puppet_enterprise::master::code_manager::timeouts_shutdown: 610
#puppet_enterprise::master::code_manager::timeouts_wait: 700

#puppet_enterprise::master::code_manager::authenticate_webhook: false
#puppet_enterprise::master::code_manager::invalid_branches: "correct"

#### this was for an escalation.  adds HEX output to ring buffer or PS daemon log
#puppet_enterprise::profile::master::java_args: 
#  'Djavax.net.debug=': 'ssl:sslctx:plaintext'

puppet_enterprise::master::puppetserver::jruby_max_active_instances: 4

### PuppetDB command processing (defaults to half the system CPU cores)
#puppet_enterprise::puppetdb::command_processing_threads: <NUMBER of THREADS>

### Console service status check timeout 
#puppet_enterprise::console_services::service_alert_timeout: "5000"

###workaround for https://tickets.puppetlabs.com/browse/PE-10166
#puppet_enterprise::profile::certificate_authority::client_whitelist:
#  - agent2.example.com
#  - 192.168.0.24

##test adding to file-sync API whitelist
#puppet_enterprise::master::file_sync::whitelisted_certnames:
#  - agent2.example.com
#  - 192.168.0.24
